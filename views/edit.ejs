<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RealFit</title>
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/imgs/favicon-32x32.png"
    />
    <!-- <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
      crossorigin="anonymous"
    /> -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w=="
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/new.css" />
  </head>
  <body>
    <header class=" top-0 bg-white">
      <nav class="flex items-center justify-between bg-white p-2 shadow-current">
        <!-- Left: Logo/Image -->
        <div class="mx-auto">
          <a href="/feed" aria-label="R">
            <img src="/RealBrand/text.png" alt="RealFit" class="h-10 w-auto" />
          </a>
        </div>
        
      </nav>
    </header>

   <!-- LOGOUT BUTTON
   <div class=" absolute top-11 left-4 mt-14">
    <a href="/logout" class="text-white bg-gradient-to-br from-red-500 to-orange-400 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-pink-200 dark:focus:ring-pink-800 font-medium rounded-lg text-sm px-24 py-2.5  mt-5">Logout</a>
  </div> -->
<!-- BACKGROUND -->
<div class="bg-gray-100 w-full h-auto flex flex-col justify-center items-center p-14">
  <!-- Profile Settings Title -->
  <h1 class="text-slate-700 font-title text-2xl sm:text-3xl w-full max-w-5xl mb-3 text-center sm:text-left">
    Welcome, <%= user.userName %>
  </h1>

  <!-- Profile Settings Form Section -->
  <div class="bg-white w-full max-w-5xl rounded-3xl pb-8 sm:pb-14">

    <!-- Header with Gradient -->
    <div class="bg-gradient-to-r from-orange-400 to-yellow-500 p-6 sm:p-10 rounded-t-3xl mb-4 shadow-lg"></div>

    <!-- Form Content Below the Header -->
    <form action="/profile" method="POST" enctype="multipart/form-data" class="space-y-6 sm:space-y-8 p-4 sm:p-8 flex flex-col items-center">

      <!-- Email -->
      <h2 class="font-title text-black text-lg sm:text-xl text-center sm:text-left">
        <%= user.email %>
      </h2>

<!-- PFP CHANGE -->
<div class="flex justify-center items-center relative group overflow-hidden">
  <!-- Image -->
  <img 
    id="profileImagePreview"
    class="w-32 h-32 sm:w-40 sm:h-40 lg:w-48 lg:h-48 rounded-full object-cover object-center group-hover:opacity-50 transition-opacity duration-300"
    src="<%= user.profileImage %>" 
    onclick="document.getElementById('profileImage').click();" 
    alt="Profile Image"
     />

  <!-- Text Overlay -->
  <div class="absolute inset-0 flex justify-center items-center text-white font-semibold opacity-0 group-hover:opacity-100 transition-opacity duration-300 cursor-pointer" onclick="document.getElementById('profileImage').click();">
    Change Picture
  </div>

  <label for="profileImage" class="block text-black font-semibold mb-2"></label>
  <input 
    type="file" 
    id="profileImage" 
    name="profileImage" 
    accept="image/*" 
    class="hidden" 
    onchange="previewImage(event)" 
  />
</div>

<script>
  function previewImage(event) {
    const file = event.target.files[0];
    const reader = new FileReader();
    
    reader.onload = function(e) {
      // Set the new image source to the selected file
      document.getElementById('profileImagePreview').src = e.target.result;
    }
    
    if (file) {
      reader.readAsDataURL(file);
    }
  }
</script>

      
      
      <!-- BIO FORM -->
      <div class="mb-4 w-full max-w-xl">
        <label for="bio" class="block text-black font-title font-medium text-base text-center sm:text-left">Bio</label>
        <input 
          type="text" 
          class="w-full sm:w-[530px] h-12 bg-stone-100 rounded-lg text-base font-title px-4 mt-2 mb-3 mx-auto sm:mx-0" 
          id="bio" 
          name="bio" 
          value="<%= user.bio %>"
        >
      </div>
      
      <!-- Save Button -->
      <div>
        <button 
          type="submit" 
          class="text-white w-40 sm:w-52 h-11 rounded-lg bg-gradient-to-br from-orange-500 to-yellow-400 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-orange-200 dark:focus:ring-yellow-800">
          Save
        </button>
      </div>
    </form>
  </div>
      <!-- LOGOUT BUTTON -->
      <div class="flex justify-center items-center mt-10">
        <a href="/logout" class="text-white bg-gradient-to-br from-black to-gray-700 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-pink-200 dark:focus:ring-pink-800  font-medium rounded-lg text-sm px-24 py-2.5">Logout</a>
       </div>     
</div>



<%- include('partials/footer') -%>